Project: Memory Vault

Server
- Provider: DigitalOcean Droplet
- Droplet Details:- 
      {
         "droplets":{
            "id": 529531408,
            "name": "midnight-mem-vault",

        },
        "image": {
                "id": 159651797,
                "name": "22.04 (LTS) x64",
                "distribution": "Ubuntu",
                "slug": "ubuntu-22-04-x64"
        },
        "networks": {
                "v4": [
                    {
                        "ip_address": "10.108.0.4",
                        "netmask": "255.255.240.0",
                        "gateway": "10.108.0.1",
                        "type": "private"
                    },
                    {
                        "ip_address": "134.209.46.225",
                        "netmask": "255.255.240.0",
                        "gateway": "134.209.32.1",
                        "type": "public"
                    }
                ],
                "v6": []
        }
      }


- Access: SSH / SFTP (key-based recommended)
- SSH: ssh root@134.209.46.225 -i ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINYVijP9iDugp6E7QAxi9PQ3mYwJUMFntemarin08jRP mastercase@DESKTOP-HJ32F7T
- SFTP: sftp root@134.209.46.225
- App path: /var/www/sites/memory_vault
- Public webroot: /var/www/sites/memory_vault/public
- Environment file: /var/www/sites/memory_vault/.env
- Nginx site config: /etc/nginx/sites-available/memory_vault (symlink in sites-enabled)
- PHP-FPM service: php8.2-fpm
- Logs (system): /var/log/nginx/access.log, /var/log/nginx/error.log
- Logs (app): storage/logs/laravel.log, storage/logs/Server-requests.log

Database
- Engine: PostgreSQL
- Host: noir-memory-do-user-25995768-0.g.db.ondigitalocean.com
- Port: 25060
- Name: memory_vault
- User: hitesh_builder
- SSL Mode: require
- Password: NOT stored in repo (see /var/www/sites/memory_vault/.env)

Application URLs
- Local dev base: http://127.0.0.1:8000
- Local API base: http://127.0.0.1:8000/api
- Health: GET /api/health â†’ {"status":"ok"}

Authentication (Sanctum)
- Generate token: POST /api/token (JSON: email, password, device_name)
- Use token: Authorization: Bearer <token>
- Verify user: GET /api/user (requires token)
- Protected endpoints: /api/memories*, /api/memory*, /api/user
- Public endpoints: /api/health, /api/token

Deployment & Maintenance Commands
- Update code (from app root):
  - Upload the Latest Code Zip.
  - composer install --no-dev -o
  - php artisan migrate --force
  - php artisan config:cache
  - php artisan route:cache
  - php artisan view:cache
  - php artisan optimize:clear (as needed)
- Services (Ubuntu/Debian):
  - sudo systemctl status nginx
  - sudo systemctl reload nginx
  - sudo systemctl restart nginx
  - sudo systemctl status php8.2-fpm
  - sudo systemctl restart php8.2-fpm
  - sudo journalctl -u nginx -f
  - sudo journalctl -u php8.2-fpm -f
- Queues (if enabled):
  - php artisan queue:work --daemon --stop-when-empty
  - sudo systemctl status supervisor (if configured)

Database Admin
- Connect: psql "host=noir-memory-do-user-25995768-0.g.db.ondigitalocean.com port=25060 user=hitesh_builder dbname=memory_vault sslmode=require"
- Backup (custom format):
  - pg_dump -h noir-memory-do-user-25995768-0.g.db.ondigitalocean.com -p 25060 -U hitesh_builder -d memory_vault -Fc -f memory_vault.dump
- Restore:
  - pg_restore -h <host> -p <port> -U <user> -d <db> memory_vault.dump

Permissions (app path)
- sudo chown -R www-data:www-data /var/www/sites/memory_vault
- sudo find /var/www/sites/memory_vault -type f -exec chmod 644 {} \;
- sudo find /var/www/sites/memory_vault -type d -exec chmod 755 {} \;
- sudo chown -R www-data:www-data /var/www/sites/memory_vault/storage /var/www/sites/memory_vault/bootstrap/cache

Diagnostics
- Route list: php artisan route:list
- Logs (app): tail -f storage/logs/laravel.log
- Request logs: tail -f storage/logs/Server-requests.log
- PHP info (temporary): php -i | less

References
- Client API Guide: Application/docs/CLIENT_API.md
- Protected routes: routes/api.php
- Exception handling (401 for API): bootstrap/app.php